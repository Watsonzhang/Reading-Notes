### 企业所得税溯源
    boxId:532253600605274112
    税表模板：江苏国税企业所得税月（季）报A类（2018版）
    定位到父模板：
    boxId：592734063534538752
    父模板名称：企业所得税月（季）报A类（2018版）父模板公式
    定位到系统id:systemId=498812948580401153 系统名称：企业版业务系统
    父模板明细：
    子模板使用父模板格式：RefTemplate(A200000企业所得税月(季)度预缴纳税(A类),J11)
    含义：使用父模板 J11 单元格内数据
    使用到到其他sheet模板：A201030减免所得税优惠明细表
    例如：营业收入
        UDEF_ROOT_KM('DF',$QYID$,$KJND_B$,1,$KJND_E$,$KJQJ_E$,'主营业务收入')
        -UDEF_ROOT_KM('JF',$QYID$,$KJND_B$,1,$KJND_E$,$KJQJ_E$,'主营业务收入')
        +UDEF_ROOT_KM('DF',$QYID$,$KJND_B$,1,$KJND_E$,$KJQJ_E$,'其他业务收入')
        -UDEF_ROOT_KM('JF',$QYID$,$KJND_B$,1,$KJND_E$,$KJQJ_E$,'其他业务收入')
        +UDEF_ROOT_KM('DF',$QYID$,$KJND_B$,1,$KJND_E$,$KJQJ_E$,'商品销售收入')
        -UDEF_ROOT_KM('JF',$QYID$,$KJND_B$,1,$KJND_E$,$KJQJ_E$,'商品销售收入')
        +UDEF_ROOT_KM('DF',$QYID$,$KJND_B$,1,$KJND_E$,$KJQJ_E$,'其他收入')
        -UDEF_ROOT_KM('JF',$QYID$,$KJND_B$,1,$KJND_E$,$KJQJ_E$,'其他收入')
        +UDEF_ROOT_KM('DF',$QYID$,$KJND_B$,1,$KJND_E$,$KJQJ_E$,'捐赠收入')
        -UDEF_ROOT_KM('JF',$QYID$,$KJND_B$,1,$KJND_E$,$KJQJ_E$,'捐赠收入')
        +UDEF_ROOT_KM('DF',$QYID$,$KJND_B$,1,$KJND_E$,$KJQJ_E$,'会费收入')
        -UDEF_ROOT_KM('JF',$QYID$,$KJND_B$,1,$KJND_E$,$KJQJ_E$,'会费收入')
        +UDEF_ROOT_KM('DF',$QYID$,$KJND_B$,1,$KJND_E$,$KJQJ_E$,'提供服务收入')
        -UDEF_ROOT_KM('JF',$QYID$,$KJND_B$,1,$KJND_E$,$KJQJ_E$,'提供服务收入')
        +UDEF_ROOT_KM('DF',$QYID$,$KJND_B$,1,$KJND_E$,$KJQJ_E$,'政府补助收入')
        -UDEF_ROOT_KM('JF',$QYID$,$KJND_B$,1,$KJND_E$,$KJQJ_E$,'政府补助收入')
    涉及公式：UDEF_ROOT_KM
    由于替换系统为-企业版业务系统-Java 
    替代系统id:611939896642240512
    脚本id:694633462478147584
    脚本名称：获取一级科目余额取值
    涉及多数据源：
        数据源①：531898447201042432 名称 企业账套科目业务系统数据源 涉及库：accounting_account 涉及表：ztkm_xx  ztkm_dz  zt_qjzt
        数据源②：539473443209347072 名称：企业版凭证 涉及库：accounting_pz 涉及表：pz_mx
    例如：不征税收入 UDEF_KM
    脚本id:694633591046148096
    脚本名称： 科目余额取值
    涉及数据源：531898447201042432 名称：企业账套科目业务系统数据源 涉及库：accounting_account 涉及表：zt_xx sys_kmbq ztkm_xx ztkm_dz ztkm_nm_bq_rel ztkm_kmye
    涉及数据源：539473443209347072 名称：企业版凭证 涉及库：accounting_pz 涉及表：pz_info pz_mx
    涉及公式：IF 
    脚本id:654010389639204865
    脚本名称：条件判断
    无数据库连接
    Round ABS SUBSTR类似同理
    QUERY_KYSLRQ
    脚本id:653999574886387712
    脚本名称： 查询开业（设立）日期
    涉及数据源：519904062594875392 名称：云账房企业版信息数据源 涉及库：accounting_company 涉及表：YZF_COMPANY_BASE_INFO
    UDEF_ZB 为系统内置
    BBSSQ
    脚本id:692697187248508929
    脚本名称： 获取税款所属期间
    无数据源
    QUERY_QYMC
    脚本id:654000895848878080
    脚本名称： 查询企业名称
    涉及数据源：519904062594875392 名称： 涉及库：accounting_company 涉及表：YZF_COMPANY
   
   
   
  个人所得税：综合所得申报表
  boxId:545631105059913728
  脚本公式：UDFL_FLOAT_NEW_RYXX]\]
  脚本名称：SME集团薪税-人员信息
  数据源:部门人员-企业版业务系统
  数据源id:578602793258975232
  数据库：yzf_depart_employee
  数据表：c_employee_work_record c_employee_self_info c_employee_base_info
  平台:SME集团薪税
  
  脚本公式：UDFL_FLOAT_NEW_GS
  脚本名称：SME集团薪税-正常人员薪酬、劳务报酬、全年一次性奖金
  数据源:企业版-集团薪税取数
  数据源id:610468320289751040
  数据库：salary_corporation
  数据表：article_income_detail annual_bonus_income_detail salary_detail labor_income_detail
  平台:SME集团薪税
  

  脚本公式：UDFL_GZ_REDUCTION_INFO
  脚本名称：企业版-薪酬-扣除信息
  无数据源
  
  脚本公式：UDFL_GZ_DONATE_INFO
  脚本名称：企业版-薪酬-捐赠信息
  无数据源
  
  个人所得税：个人生产经营所得纳税申报表
  boxid:662975780243640321
  脚本公式：GRSDS_NSSB
  脚本名称：企业版个人生产经营税表
  数据源:基础版薪酬
  数据源id:668883976653115392
  数据库：accounting_salary
  数据表：salary
  
  脚本公式：UDFL_FLOAT_HS_JYSD
  脚本名称：SME-生产经营所得-薪酬取数
  数据源:部门人员-企业版业务系统
  数据源id:668883976653115392,578602793258975232
  数据库：accounting_salary ,yzf_depart_employee
  数据表：salary salary_item_approval,ry_info,c_employee_base_info,c_employee_work_record,ry_sys_xlz

  脚本公式：UDFL_FLOAT_HS_RYXX
  脚本名称：SME-生产经营所得-人员取数
  数据源id:668883976653115392,578602793258975232
  数据库：accounting_salary,yzf_depart_employee
  数据表：salary ry_info,c_employee_base_info,c_employee_work_record,ry_sys_xlz

  脚本公式：QUERY_NSRSBH
  脚本名称：查询纳税人识别号
  数据源:云账房企业版信息数据源
  数据源id:519904062594875392
  数据库：accounting_company
  数据表：YZF_COMPANY
  平台:SME集团薪税     
    
   
  
  
  关于数据来源的问题：
    发票采集(进销项发票)： ①openapi ②数据 ③本地提取 ④免税盘
    财务数据采集(账套.科目余额.凭证)：①
    薪酬数据采集：
    报销单采集：
    银行对账单采集：
    
    
    
UDEF_KM 入参     * @param env
                * @param typeAo    类型
                * @param qyidAo    企业id
                * @param kjndBAo   会计年度开始时间
                * @param kjqjBAo   会计期间开始时间
                * @param kjndEAo   会计年度结束时间
                * @param kjqjEAo   会计期间结束时间
                * @param kmbqAo    科目编码
                * @param sfbhcszAo 是否包含 0-否 1-是  默认包含
结果计算该科目的余额

QUERY_KYSLRQ 入参 企业id 出参 企业创建日期

QUERY_QYMC 入参 企业id 出参 企业名称

UDFL_FLOAT_NEW_RYXX 入参     /**
                            * 人员取数
                            * @param env   公式上下文
                            * @param columnName    列名
                            * @param qyId  企业id
                            * @param kjnd  会计年度
                            * @param kjqj  会计期间
                            * @return  人员信息
                            */
 出参 人员信息结果集
 
 UDFL_FLOAT_NEW_GS 入参     /**
                            *
                            * @param env 上下文
                            * @param columnName 列名
                            * @param qyId  企业id
                            * @param kjnd  会计年度
                            * @param kjqj  会计期间
                            * @param gslx  个税类型
                            * @return 列取值
                            */
出参 计算各种类型的个税

GRSDS_NSSB 入参     * qzzd	"取值字段：
                   * ztdm	账套代码
                   * kjnd	会计年度
                   * kjqj	会计期间
                   
出参 个人所得税税表取值  例如 * K_SDQSRQ":取自薪酬表中“薪酬所属期起”字段。
                  * K_SDZZRQ":取自薪酬表中“薪酬所属期止”字段。
                  * K_QYLX":取自薪酬表中“企业类型”字段。
                  * K_ZSFS":取自薪酬表中“征收方式”字段。
                  * K_SRZE":取自薪酬表中“收入总额”字段。
                  * K_CBFY":取自薪酬表中“成本费用”字段。
                  * K_LRZE":取自薪酬表中“利润总额”字段。
                  * K_MBYQNDKS:取自薪酬表中“弥补以前年度亏损”字段。
                  * K_YSSDL":取自薪酬表中“应税所得率”字段。
                  *                   
UDFL_FLOAT_HS_JYSD  SME-生产经营所得-薪酬取数 
 入参 
 qzlx 取值类型 
 qyId 企业id 
 kjnd 会计年度 
 kjqj 会计区间 
 xclx 薪酬类型  分为查账和核定
 出参 查询核定和查账薪酬数据并匹配取值类型
 
 UDFL_FLOAT_HS_RYXX  
 入参 
 qzlx 取值类型
 qyId 企业id
 kjnd 会计年度
 kjqj 会计区间
 出参 根据传入的取值类型获取对应人员信息值
 
 qyId 企业id
 纳税人识别号
  
  
  
    
   
   
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    `根据系统id定位到脚本id:
        scriptId:524996450854109184
        脚本名称：获取一级科目余额取值
        脚本内容：略(可根据脚本名搜索)
        脚本内关键字：
            数据集：
            QYID_QUERY_ZTDM_DATA 
            ACCOUNT_ISHAS_CHILD_KM 
            PZ_QMJZ_DATA_INFO 
            KMYE_DATA_BEFORE_KJQJ 
        数据集来源①： QYID_QUERY_ZTDM_DATA 
        涉及sql->SELECT ztdm,sys_start_year,sys_start_month FROM zt_xx WHERE qyid = $QYID$ LIMIT 1;
    根据数据集可追溯到数据源
         数据源id:531898447201042432 
         数据源名称：企业账套科目业务系统数据源
         数据库名称：accounting_account
         涉及表：zt_xx
         涉及项目 财税1.0 和 2.0
         数据来源：采集 + 手动初始化数据
         数据集来源①： QYID_QUERY_ZTDM_DATA 
         涉及sql->SELECT ztdm,sys_start_year,sys_start_month FROM zt_xx WHERE qyid = $QYID$ LIMIT 1;
             根据数据集可追溯到数据源
                  数据源id:531898447201042432 
                  数据源名称：企业账套科目业务系统数据源
                  数据库名称：accounting_account
                  涉及表：zt_xx
                  涉及项目 财税1.0和2.0
                  数据来源：采集 + 手动初始化数据
    `    
         
         
           
            
        
    
    